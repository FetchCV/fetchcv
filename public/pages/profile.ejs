<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" type="text/css" href="../styles/tailwind.css">
   <link rel="stylesheet" href="../styles/profile-styles.css">
   <link rel="icon" type="images/svg" href="images/logo.svg">
   <link rel="stylesheet" type='text/css' href="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/devicon.min.css">

   <title>My Profile | FetchCV</title>
</head>
<%- include("../partials/navbar.ejs") %>
<body class="px-8 flex justify-center bg-far-light dark:bg-far-dark dark:text-white">
         <script>
            let userDataWorking = `<%- JSON.stringify(userData) %>`;
            let githubUserData = JSON.parse(userDataWorking);
         </script>

   <div class="mb-20">
      <!-- Edit panel -->
      <div class="edit-controls py-4 px-4 my-2 bg-close-light dark:bg-close-dark border border-close-b-light dark:border-close-b-dark rounded-md user-info">
         <div class="changes-saved-banner hidden p-4 my-2 bg-blue-300 border-2 border-blue-500 rounded-md">Changes saved!</div>
         <div>
            <h2 class="text-zinc-500">Edit description</h2>
            <div class="min-w-[40vw] flex w-full justify-center items-center bg-far-light dark:bg-far-dark border-close-b-light dark:border-close-b-dark has-[:focus]:border-public rounded-md overflow-hidden">
               <input id="edit-description" maxlength="500" onKeyDown="if (event.keyCode == 13) editDescription(this.value)" class="p-2 edit-description w-full outline-none bg-transparent" type="text">
               <span title="Save" tabindex="0" class="material-symbols-rounded text-public mr-2" onclick="editDescription(document.querySelector('#edit-description').value)">save</span>
               <span title="Revert to GitHub bio" tabindex="0" class="material-symbols-rounded text-public mr-2" onclick="revertDescriptionToGitHubBio()">refresh</span>
            </div>
         </div>
      </div>
   </div>
</body>
<style>
   p {
      max-width: 700px;
   }
</style>

<script>
   let username;
   window.addEventListener("load", () => {
      username = githubUserData.login;
      getUserInfo();
   });
</script>
<script src="/scripts/displayErrors.js"></script>
<script src="/scripts/github/getToken.js"></script>
<script src="/scripts/github/fetchData.js"></script>
<script src="/scripts/fetchData.js"></script>
<script src="/scripts/editProfile.js"></script>
</html>